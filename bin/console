#!/usr/bin/env php
<?php

declare(strict_types=1);

use PHPCensor\Common\Application\ConfigurationInterface;
use PHPCensor\Console\Application;
use PHPCensor\DatabaseManager;
use PHPCensor\Store\BuildErrorStore;
use PHPCensor\Store\BuildStore;
use PHPCensor\Store\EnvironmentStore;
use PHPCensor\Store\ProjectGroupStore;
use PHPCensor\Store\ProjectStore;
use PHPCensor\Store\SecretStore;
use PHPCensor\Store\UserStore;
use PHPCensor\StoreRegistry;
use Psr\Container\ContainerInterface;
use Symfony\Component\HttpFoundation\Session\Session;

\error_reporting(-1);
\ini_set('display_errors', '1');

/** @var ConfigurationInterface $configuration */
/** @var DatabaseManager $databaseManager */
/** @var StoreRegistry $storeRegistry */
/** @var Session $session */
/** @var UserStore $userStore */
/** @var ProjectStore $projectStore */
/** @var ProjectGroupStore $projectGroupStore */
/** @var BuildStore $buildStore */
/** @var BuildErrorStore $buildErrorStore */
/** @var SecretStore $secretStore */
/** @var EnvironmentStore $environmentStore */
/** @var ContainerInterface $container */
require_once(\dirname(__DIR__) . '/bootstrap.php');

(new Application(
    $configuration,
    $databaseManager,
    $storeRegistry,
    $userStore,
    $projectStore,
    $projectGroupStore,
    $buildStore,
    $buildErrorStore,
    $secretStore,
    $environmentStore
))->run();
